var di={runners:[],registry:{},reg:function(a,b){var c=di._getArgs(b);return Array.isArray(b)&&(b=b.pop()),di.registry[a]={fn:b,args:c,instance:null},di},run:function(a){var b=di._getArgs(a);return Array.isArray(a)&&(a=a.pop()),di.runners.push({fn:a,args:b}),di},start:function(){di.runners.forEach(function(a){di._exec(a)})},_exec:function(a){var b=di._resolve(a.args),c=a.fn.apply(null,b);return a.name&&(a.instance=c),c},_resolve:function(a){return a.map(function(a){var b=di.registry[a];if(b&&b.instance)return b.instance;if(b)return di._exec(b);if(window[a])return window[a];throw new Error('Cannot resolve dependency "'+a+'"')})},_getArgs:function(a){if(Array.isArray(a))return a.slice(0,a.length-1);var b=[],c=/^function[^\(]*\(([^\)]*)\)/i,d=a.toString().match(c)[1];return d&&d.length&&(b=d.replace(/\s/g,"").split(/,/)),b}};